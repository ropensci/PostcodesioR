<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction • PostcodesioR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">PostcodesioR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/erzk/PostcodesioR/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction</h1>
                        <h4 class="author">Eryk Walczak</h4>
            
            <h4 class="date">2018-03-20</h4>
          </div>

    
    
<div class="contents">
<p>PostcodesioR is an API wrapper for postcodes.io. It allows acquiring geographic information about the UK postcodes and geographic coordinates.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">"devtools"</span>)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"erzk/PostcodesioR"</span>)</code></pre></div>
<div id="lookup-postcodes-and-outcodes" class="section level3">
<h3 class="hasAnchor">
<a href="#lookup-postcodes-and-outcodes" class="anchor"></a>Lookup postcodes and outcodes</h3>
<div id="single-postcode" class="section level4">
<h4 class="hasAnchor">
<a href="#single-postcode" class="anchor"></a>Single postcode</h4>
<p>Provide a postcode to obtain all available information</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(PostcodesioR)

lookup_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/postcode_lookup.html">postcode_lookup</a></span>(<span class="st">"EC1Y8LX"</span>)

<span class="co">#overview</span>
<span class="kw">str</span>(lookup_result)</code></pre></div>
<pre><code>## 'data.frame':    1 obs. of  29 variables:
##  $ postcode                       : chr "EC1Y 8LX"
##  $ quality                        : int 1
##  $ eastings                       : int 532544
##  $ northings                      : int 182128
##  $ country                        : chr "England"
##  $ nhs_ha                         : chr "London"
##  $ longitude                      : num -0.0909
##  $ latitude                       : num 51.5
##  $ european_electoral_region      : chr "London"
##  $ primary_care_trust             : chr "Islington"
##  $ region                         : chr "London"
##  $ lsoa                           : chr "Islington 023D"
##  $ msoa                           : chr "Islington 023"
##  $ incode                         : chr "8LX"
##  $ outcode                        : chr "EC1Y"
##  $ parliamentary_constituency     : chr "Islington South and Finsbury"
##  $ admin_district                 : chr "Islington"
##  $ parish                         : chr "Islington, unparished area"
##  $ admin_county                   : logi NA
##  $ admin_ward                     : chr "Bunhill"
##  $ ccg                            : chr "NHS Islington"
##  $ nuts                           : chr "Haringey and Islington"
##  $ admin_district_code            : chr "E09000019"
##  $ admin_county_code              : chr "E99999999"
##  $ admin_ward_code                : chr "E05000367"
##  $ parish_code                    : chr "E43000209"
##  $ parliamentary_constituency_code: chr "E14000764"
##  $ ccg_code                       : chr "E38000088"
##  $ nuts_code                      : chr "UKI43"</code></pre>
<p>There is another function that returns the same data points but returns a list and allows optional parameters</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">query_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/postcode_query.html">postcode_query</a></span>(<span class="st">"EC1Y8LX"</span>)

<span class="co">#overview</span>
<span class="kw">str</span>(query_result)</code></pre></div>
<pre><code>## List of 1
##  $ :List of 23
##   ..$ postcode                  : chr "EC1Y 8LX"
##   ..$ quality                   : int 1
##   ..$ eastings                  : int 532544
##   ..$ northings                 : int 182128
##   ..$ country                   : chr "England"
##   ..$ nhs_ha                    : chr "London"
##   ..$ longitude                 : num -0.0909
##   ..$ latitude                  : num 51.5
##   ..$ european_electoral_region : chr "London"
##   ..$ primary_care_trust        : chr "Islington"
##   ..$ region                    : chr "London"
##   ..$ lsoa                      : chr "Islington 023D"
##   ..$ msoa                      : chr "Islington 023"
##   ..$ incode                    : chr "8LX"
##   ..$ outcode                   : chr "EC1Y"
##   ..$ parliamentary_constituency: chr "Islington South and Finsbury"
##   ..$ admin_district            : chr "Islington"
##   ..$ parish                    : chr "Islington, unparished area"
##   ..$ admin_county              : NULL
##   ..$ admin_ward                : chr "Bunhill"
##   ..$ ccg                       : chr "NHS Islington"
##   ..$ nuts                      : chr "Haringey and Islington"
##   ..$ codes                     :List of 7
##   .. ..$ admin_district            : chr "E09000019"
##   .. ..$ admin_county              : chr "E99999999"
##   .. ..$ admin_ward                : chr "E05000367"
##   .. ..$ parish                    : chr "E43000209"
##   .. ..$ parliamentary_constituency: chr "E14000764"
##   .. ..$ ccg                       : chr "E38000088"
##   .. ..$ nuts                      : chr "UKI43"</code></pre>
<p>This function creates a nested list with the codes for administrative district, county, ward, parish, parliamentary constituency, CCG, and NUTS.</p>
</div>
<div id="multiple-postcodes" class="section level4">
<h4 class="hasAnchor">
<a href="#multiple-postcodes" class="anchor"></a>Multiple postcodes</h4>
<p>To query two or more postcodes, use <code>bulk_</code> functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pc_list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">postcodes =</span> <span class="kw">c</span>(<span class="st">"PR3 0SG"</span>, <span class="st">"M45 6GN"</span>, <span class="st">"EX165BL"</span>))
bulk_lookup_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/bulk_postcode_lookup.html">bulk_postcode_lookup</a></span>(pc_list)

<span class="co">#overview</span>
<span class="kw">str</span>(bulk_lookup_result[<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 2
##   ..$ query : chr "PR3 0SG"
##   ..$ result:List of 23
##   .. ..$ postcode                  : chr "PR3 0SG"
##   .. ..$ quality                   : int 1
##   .. ..$ eastings                  : int 351012
##   .. ..$ northings                 : int 440302
##   .. ..$ country                   : chr "England"
##   .. ..$ nhs_ha                    : chr "North West"
##   .. ..$ longitude                 : num -2.75
##   .. ..$ latitude                  : num 53.9
##   .. ..$ european_electoral_region : chr "North West"
##   .. ..$ primary_care_trust        : chr "North Lancashire Teaching"
##   .. ..$ region                    : chr "North West"
##   .. ..$ lsoa                      : chr "Wyre 006A"
##   .. ..$ msoa                      : chr "Wyre 006"
##   .. ..$ incode                    : chr "0SG"
##   .. ..$ outcode                   : chr "PR3"
##   .. ..$ parliamentary_constituency: chr "Wyre and Preston North"
##   .. ..$ admin_district            : chr "Wyre"
##   .. ..$ parish                    : chr "Myerscough and Bilsborrow"
##   .. ..$ admin_county              : chr "Lancashire"
##   .. ..$ admin_ward                : chr "Brock with Catterall"
##   .. ..$ ccg                       : chr "NHS Morecambe Bay"
##   .. ..$ nuts                      : chr "Lancaster and Wyre"
##   .. ..$ codes                     :List of 7
##   .. .. ..$ admin_district            : chr "E07000128"
##   .. .. ..$ admin_county              : chr "E10000017"
##   .. .. ..$ admin_ward                : chr "E05009934"
##   .. .. ..$ parish                    : chr "E04005340"
##   .. .. ..$ parliamentary_constituency: chr "E14001057"
##   .. .. ..$ ccg                       : chr "E38000216"
##   .. .. ..$ nuts                      : chr "UKD44"</code></pre>
</div>
<div id="outward-code-lookup" class="section level4">
<h4 class="hasAnchor">
<a href="#outward-code-lookup" class="anchor"></a>Outward code lookup</h4>
<p>Provide an outcode to obtain geolocation data for the centroid of the specifid outcode:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ocl &lt;-<span class="st"> </span><span class="kw"><a href="../reference/outward_code_lookup.html">outward_code_lookup</a></span>(<span class="st">"E1"</span>)

<span class="co">#overview</span>
<span class="kw">str</span>(ocl)</code></pre></div>
<pre><code>## List of 10
##  $ outcode       : chr "E1"
##  $ longitude     : num -0.0594
##  $ latitude      : num 51.5
##  $ northings     : int 181621
##  $ eastings      : int 534744
##  $ admin_district:List of 3
##   ..$ : chr "Hackney"
##   ..$ : chr "Tower Hamlets"
##   ..$ : chr "City of London"
##  $ parish        :List of 3
##   ..$ : chr "Tower Hamlets, unparished area"
##   ..$ : chr "City of London, unparished area"
##   ..$ : chr "Hackney, unparished area"
##  $ admin_county  : list()
##  $ admin_ward    :List of 13
##   ..$ : chr "Bethnal Green"
##   ..$ : chr "Shadwell"
##   ..$ : chr "Portsoken"
##   ..$ : chr "Tower"
##   ..$ : chr "Whitechapel"
##   ..$ : chr "Bishopsgate"
##   ..$ : chr "Stepney Green"
##   ..$ : chr "Aldgate"
##   ..$ : chr "Weavers"
##   ..$ : chr "Hoxton East &amp; Shoreditch"
##   ..$ : chr "St Dunstan's"
##   ..$ : chr "Spitalfields &amp; Banglatown"
##   ..$ : chr "St Peter's"
##  $ country       :List of 1
##   ..$ : chr "England"</code></pre>
</div>
</div>
<div id="reverse-geocoding" class="section level3">
<h3 class="hasAnchor">
<a href="#reverse-geocoding" class="anchor"></a>Reverse geocoding</h3>
<p>Provide latitude and longitude to obtain geographic information. Different levels of aggregation are available, i.e. postcode or outcode.</p>
<div id="single-postcode-1" class="section level4">
<h4 class="hasAnchor">
<a href="#single-postcode-1" class="anchor"></a>Single postcode</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rev_geo &lt;-<span class="st"> </span><span class="kw"><a href="../reference/reverse_geocoding.html">reverse_geocoding</a></span>(<span class="fl">0.127</span>, <span class="fl">51.507</span>)

<span class="co"># overview</span>
<span class="kw">str</span>(rev_geo[<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 24
##   ..$ postcode                  : chr "SE28 8NH"
##   ..$ quality                   : int 1
##   ..$ eastings                  : int 547715
##   ..$ northings                 : int 180780
##   ..$ country                   : chr "England"
##   ..$ nhs_ha                    : chr "London"
##   ..$ longitude                 : num 0.127
##   ..$ latitude                  : num 51.5
##   ..$ european_electoral_region : chr "London"
##   ..$ primary_care_trust        : chr "Bexley"
##   ..$ region                    : chr "London"
##   ..$ lsoa                      : chr "Bexley 001D"
##   ..$ msoa                      : chr "Bexley 001"
##   ..$ incode                    : chr "8NH"
##   ..$ outcode                   : chr "SE28"
##   ..$ distance                  : num 38.9
##   ..$ parliamentary_constituency: chr "Erith and Thamesmead"
##   ..$ admin_district            : chr "Bexley"
##   ..$ parish                    : chr "Bexley, unparished area"
##   ..$ admin_county              : NULL
##   ..$ admin_ward                : chr "Thamesmead East"
##   ..$ ccg                       : chr "NHS Bexley"
##   ..$ nuts                      : chr "Bexley and Greenwich"
##   ..$ codes                     :List of 7
##   .. ..$ admin_district            : chr "E09000004"
##   .. ..$ admin_county              : chr "E99999999"
##   .. ..$ admin_ward                : chr "E05000084"
##   .. ..$ parish                    : chr "E43000194"
##   .. ..$ parliamentary_constituency: chr "E14000696"
##   .. ..$ ccg                       : chr "E38000011"
##   .. ..$ nuts                      : chr "UKI51"</code></pre>
</div>
<div id="multiple-postcodes-1" class="section level4">
<h4 class="hasAnchor">
<a href="#multiple-postcodes-1" class="anchor"></a>Multiple postcodes</h4>
<p>To reverse geocode multiple values use the function underneath. The result is a nested list, which might be a bit intimidating, but it allows storing unequal number of elements.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create a list with the coordinates</span>
geolocations_list &lt;-<span class="st"> </span><span class="kw">structure</span>(
 <span class="kw">list</span>(
 <span class="dt">geolocations =</span> <span class="kw">structure</span>(
 <span class="kw">list</span>(
 <span class="dt">longitude =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">3.15807731271522</span>, <span class="op">-</span><span class="fl">1.12935802905177</span>),
 <span class="dt">latitude =</span> <span class="kw">c</span>(<span class="fl">51.4799900627036</span>, <span class="fl">50.7186356978817</span>),
 <span class="dt">limit =</span> <span class="kw">c</span>(<span class="ot">NA</span>, 100L),
 <span class="dt">radius =</span> <span class="kw">c</span>(<span class="ot">NA</span>, 500L)),
 <span class="dt">.Names =</span> <span class="kw">c</span>(<span class="st">"longitude"</span>, <span class="st">"latitude"</span>, <span class="st">"limit"</span>, <span class="st">"radius"</span>),
 <span class="dt">class =</span> <span class="st">"data.frame"</span>,
 <span class="dt">row.names =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)),
 <span class="dt">.Names =</span> <span class="st">"geolocations"</span>)

bulk_rev_geo &lt;-<span class="st"> </span><span class="kw"><a href="../reference/bulk_reverse_geocoding.html">bulk_reverse_geocoding</a></span>(geolocations_list)

bulk_rev_geo[[<span class="dv">1</span>]]<span class="op">$</span>result[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>## $postcode
## [1] "CF24 2BT"
## 
## $quality
## [1] 1
## 
## $eastings
## [1] 319675
## 
## $northings
## [1] 176305
## 
## $country
## [1] "Wales"
## 
## $nhs_ha
## [1] "Cardiff and Vale University Health Board"
## 
## $longitude
## [1] -3.158077
## 
## $latitude
## [1] 51.47998
## 
## $european_electoral_region
## [1] "Wales"
## 
## $primary_care_trust
## [1] "Cardiff and Vale University Health Board"
## 
## $region
## NULL
## 
## $lsoa
## [1] "Cardiff 038D"
## 
## $msoa
## [1] "Cardiff 038"
## 
## $incode
## [1] "2BT"
## 
## $outcode
## [1] "CF24"
## 
## $distance
## [1] 2.639788
## 
## $parliamentary_constituency
## [1] "Cardiff South and Penarth"
## 
## $admin_district
## [1] "Cardiff"
## 
## $parish
## [1] "Splott"
## 
## $admin_county
## NULL
## 
## $admin_ward
## [1] "Splott"
## 
## $ccg
## [1] "Cardiff and Vale University Health Board"
## 
## $nuts
## [1] "Cardiff and Vale of Glamorgan"
## 
## $codes
## $codes$admin_district
## [1] "W06000015"
## 
## $codes$admin_county
## [1] "W99999999"
## 
## $codes$admin_ward
## [1] "W05000879"
## 
## $codes$parish
## [1] "W04001005"
## 
## $codes$parliamentary_constituency
## [1] "W07000080"
## 
## $codes$ccg
## [1] "W11000029"
## 
## $codes$nuts
## [1] "UKL22"</code></pre>
<p>The list above is not the most common way of storing files. It’s more likely that a data frame will be used to store the geodata. In that case, it has to be turned into a list of a specific format required by the API:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">geolocations_df &lt;-<span class="st"> </span><span class="kw">structure</span>(
  <span class="kw">list</span>(
    <span class="dt">longitude =</span> <span class="kw">c</span>(<span class="op">-</span><span class="fl">3.15807731271522</span>, <span class="op">-</span><span class="fl">1.12935802905177</span>),
    <span class="dt">latitude =</span> <span class="kw">c</span>(<span class="fl">51.4799900627036</span>, <span class="fl">50.7186356978817</span>),
    <span class="dt">limit =</span> <span class="kw">c</span>(<span class="ot">NA</span>, 100L),
    <span class="dt">radius =</span> <span class="kw">c</span>(<span class="ot">NA</span>, 500L)),
  <span class="dt">.Names =</span> <span class="kw">c</span>(<span class="st">"longitude"</span>, <span class="st">"latitude"</span>, <span class="st">"limit"</span>, <span class="st">"radius"</span>),
  <span class="dt">row.names =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>,
  <span class="dt">class =</span> <span class="st">"data.frame"</span>)

geolocations_df</code></pre></div>
<pre><code>##   longitude latitude limit radius
## 1 -3.158077 51.47999    NA     NA
## 2 -1.129358 50.71864   100    500</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># turn a data frame into a list</span>
geolocations_df2list &lt;-<span class="st"> </span><span class="kw">list</span>(geolocations_df)

<span class="co"># add a list name</span>
<span class="kw">names</span>(geolocations_df2list) &lt;-<span class="st"> "geolocations"</span>

<span class="co"># display correct input for the function</span>
geolocations_df2list</code></pre></div>
<pre><code>## $geolocations
##   longitude latitude limit radius
## 1 -3.158077 51.47999    NA     NA
## 2 -1.129358 50.71864   100    500</code></pre>
<p>Common usage of this function might be extracting particular variables. You can extract one variable like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># extract one postcode</span>
bulk_rev_geo[[<span class="dv">1</span>]]<span class="op">$</span>result[[<span class="dv">8</span>]]<span class="op">$</span>postcode</code></pre></div>
<pre><code>## [1] "CF24 2AL"</code></pre>
<p>But more likely you will want more than one result. After all, that’s the point of using a bulk function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># function to extract variables of interest</span>
extract_bulk_geo_variable &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  bulk_results &lt;-<span class="st"> </span><span class="kw">lapply</span>(bulk_rev_geo, <span class="st">`</span><span class="dt">[[</span><span class="st">`</span>, <span class="st">"result"</span>)
  <span class="kw">sapply</span>(<span class="kw">unlist</span>(bulk_results, <span class="dt">recursive =</span> <span class="ot">FALSE</span>), <span class="st">`</span><span class="dt">[[</span><span class="st">`</span>, x)
}

<span class="co"># define the variables you need</span>
variables_of_interest &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"postcode"</span>, <span class="st">"latitude"</span>, <span class="st">"longitude"</span>)

<span class="co"># return a data frame with the variables</span>
<span class="kw">data.frame</span>(
  <span class="kw">sapply</span>(variables_of_interest, extract_bulk_geo_variable))</code></pre></div>
<pre><code>##    postcode         latitude         longitude
## 1  CF24 2BT 51.4799810730482 -3.15807708496285
## 2  CF24 2ED 51.4796962780375 -3.15868908771903
## 3  CF24 2AA  51.480214120738 -3.15906222875833
## 4  CF24 5NW 51.4793656523229 -3.15847910268578
## 5  CF24 2AJ  51.480686989214 -3.15852699155627
## 6  CF24 2AH 51.4805572928224 -3.15891252296984
## 7  CF24 2DZ 51.4801105864152 -3.15679871749552
## 8  CF24 2AL 51.4808346636567 -3.15814191348464
## 9  PO33 1PS 50.7188151075122 -1.12929804319882
## 10 PO33 1PT 50.7185750818924 -1.12846672060095
## 11 PO33 1QB 50.7170474559076 -1.12982656563728
## 12 PO33 1PX 50.7178907506146 -1.12714786456114
## 13 PO33 1QD 50.7172032703058 -1.12781222816285
## 14 PO33 1PU 50.7184669311199  -1.1260322523645
## 15 PO33 1PZ 50.7162328095008 -1.12791522396325
## 16 PO33 1QR 50.7157418306918 -1.12599793035477
## 17 PO33 1PB 50.7210243159623 -1.13371950415272
## 18 PO33 1PR  50.721487986434  -1.1331867990148
## 19 PO33 1PY 50.7151718843021 -1.12674508376803
## 20 PO33 1QP 50.7155625975698 -1.12488225387235
## 21 PO34 5AP 50.7214660528318 -1.12423400885574</code></pre>
</div>
<div id="single-outcode" class="section level4">
<h4 class="hasAnchor">
<a href="#single-outcode" class="anchor"></a>Single outcode</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">out_rev_geocode &lt;-<span class="st"> </span><span class="kw"><a href="../reference/outcode_reverse_geocoding.html">outcode_reverse_geocoding</a></span>(<span class="st">"-3.15"</span>, <span class="st">"51.47"</span>)
<span class="co"># overview</span>
<span class="kw">str</span>(out_rev_geocode[<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 11
##   ..$ outcode       : chr "CF99"
##   ..$ longitude     : num -3.16
##   ..$ latitude      : num 51.5
##   ..$ northings     : int 174588
##   ..$ eastings      : int 319421
##   ..$ admin_district:List of 1
##   .. ..$ : chr "Cardiff"
##   ..$ parish        :List of 1
##   .. ..$ : chr "Butetown"
##   ..$ admin_county  : list()
##   ..$ admin_ward    :List of 1
##   .. ..$ : chr "Butetown"
##   ..$ country       :List of 1
##   .. ..$ : chr "Wales"
##   ..$ distance      : num 997</code></pre>
</div>
</div>
<div id="generate-random-entries" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-random-entries" class="anchor"></a>Generate random entries</h3>
<div id="postcodes" class="section level4">
<h4 class="hasAnchor">
<a href="#postcodes" class="anchor"></a>Postcodes</h4>
<p>Generates a list with a random UK postcode and corresponding geographic information:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># without restrictions</span>
<span class="kw"><a href="../reference/random_postcode.html">random_postcode</a></span>()</code></pre></div>
<pre><code>## $postcode
## [1] "BT93 3GA"
## 
## $quality
## [1] 1
## 
## $eastings
## [1] 193902
## 
## $northings
## [1] 358125
## 
## $country
## [1] "Northern Ireland"
## 
## $nhs_ha
## [1] "ZB001"
## 
## $longitude
## [1] -8.094823
## 
## $latitude
## [1] 54.47156
## 
## $european_electoral_region
## [1] "Northern Ireland"
## 
## $primary_care_trust
## [1] "Western"
## 
## $region
## NULL
## 
## $lsoa
## [1] "Belleek and Boa"
## 
## $msoa
## NULL
## 
## $incode
## [1] "3GA"
## 
## $outcode
## [1] "BT93"
## 
## $parliamentary_constituency
## [1] "Fermanagh and South Tyrone"
## 
## $admin_district
## [1] "Fermanagh and Omagh"
## 
## $parish
## NULL
## 
## $admin_county
## NULL
## 
## $admin_ward
## [1] "Belleek and Boa"
## 
## $ccg
## [1] "Western"
## 
## $nuts
## [1] "West and South of Northern Ireland"
## 
## $codes
## $codes$admin_district
## [1] "N09000006"
## 
## $codes$admin_county
## [1] "N99999999"
## 
## $codes$admin_ward
## [1] "N08000603"
## 
## $codes$parish
## [1] "N99999999"
## 
## $codes$parliamentary_constituency
## [1] "N06000007"
## 
## $codes$ccg
## [1] "ZC050"
## 
## $codes$nuts
## [1] "UKN05"</code></pre>
<p>A randomly generated postcode can also belong to a particular outcode:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># restrict to an outcode</span>
<span class="kw"><a href="../reference/random_postcode.html">random_postcode</a></span>(<span class="st">"N1"</span>)</code></pre></div>
<pre><code>## $postcode
## [1] "N1 1SS"
## 
## $quality
## [1] 1
## 
## $eastings
## [1] 531348
## 
## $northings
## [1] 184570
## 
## $country
## [1] "England"
## 
## $nhs_ha
## [1] "London"
## 
## $longitude
## [1] -0.1072411
## 
## $latitude
## [1] 51.54475
## 
## $european_electoral_region
## [1] "London"
## 
## $primary_care_trust
## [1] "Islington"
## 
## $region
## [1] "London"
## 
## $lsoa
## [1] "Islington 016D"
## 
## $msoa
## [1] "Islington 016"
## 
## $incode
## [1] "1SS"
## 
## $outcode
## [1] "N1"
## 
## $parliamentary_constituency
## [1] "Islington South and Finsbury"
## 
## $admin_district
## [1] "Islington"
## 
## $parish
## [1] "Islington, unparished area"
## 
## $admin_county
## NULL
## 
## $admin_ward
## [1] "St Mary's"
## 
## $ccg
## [1] "NHS Islington"
## 
## $nuts
## [1] "Haringey and Islington"
## 
## $codes
## $codes$admin_district
## [1] "E09000019"
## 
## $codes$admin_county
## [1] "E99999999"
## 
## $codes$admin_ward
## [1] "E05000379"
## 
## $codes$parish
## [1] "E43000209"
## 
## $codes$parliamentary_constituency
## [1] "E14000764"
## 
## $codes$ccg
## [1] "E38000088"
## 
## $codes$nuts
## [1] "UKI43"</code></pre>
</div>
<div id="places" class="section level4">
<h4 class="hasAnchor">
<a href="#places" class="anchor"></a>Places</h4>
<p>You can also generate a random place, specified by an OSGB code, with corresponding geographic information:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/random_place.html">random_place</a></span>()</code></pre></div>
<pre><code>##                   code name_1 name_1_lang name_2 name_2_lang local_type
## 1 osgb4000000074572260 Hexton        NULL   NULL        NULL    Village
##   outcode county_unitary county_unitary_type    district_borough
## 1     SG5  Hertfordshire              County North Hertfordshire
##   district_borough_type  region country  longitude latitude eastings
## 1              District Eastern England -0.3905675 51.96425   510673
##   northings min_eastings min_northings max_eastings max_northings
## 1    230753       510299        230267       510845        231009</code></pre>
</div>
</div>
<div id="postcode-validation" class="section level3">
<h3 class="hasAnchor">
<a href="#postcode-validation" class="anchor"></a>Postcode validation</h3>
<p>This function can validate a UK postcode:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/postcode_validation.html">postcode_validation</a></span>(<span class="st">"EC1Y 8LX"</span>) <span class="co"># actual UK postcode</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/postcode_validation.html">postcode_validation</a></span>(<span class="st">"XYZ"</span>) <span class="co"># incorrect UK postcode</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="autocomplete-postcodes" class="section level3">
<h3 class="hasAnchor">
<a href="#autocomplete-postcodes" class="anchor"></a>Autocomplete postcodes</h3>
<p>Find the potential candidates for a postcode if you only know the beginning characters</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/postcode_autocomplete.html">postcode_autocomplete</a></span>(<span class="st">"EC1"</span>)</code></pre></div>
<pre><code>##    postcode
## 1  EC1A 1AA
## 2  EC1A 1AH
## 3  EC1A 1AZ
## 4  EC1A 1BB
## 5  EC1A 1DH
## 6  EC1A 1DJ
## 7  EC1A 1DL
## 8  EC1A 1DN
## 9  EC1A 1DP
## 10 EC1A 1DR</code></pre>
<p>It defaults to 10 candidates, but can be changed by specifying the <code>limit</code> argument.</p>
</div>
<div id="find-nearest-postcodes-or-outcodes" class="section level3">
<h3 class="hasAnchor">
<a href="#find-nearest-postcodes-or-outcodes" class="anchor"></a>Find nearest postcodes or outcodes</h3>
<p>Provide a postcode to get a list of the nearest postcodes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">near_pc &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nearest_postcode.html">nearest_postcode</a></span>(<span class="st">"EC1Y 8LX"</span>)

<span class="co">#overview</span>
<span class="kw">str</span>(near_pc[<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 24
##   ..$ postcode                  : chr "EC1Y 8LX"
##   ..$ quality                   : int 1
##   ..$ eastings                  : int 532544
##   ..$ northings                 : int 182128
##   ..$ country                   : chr "England"
##   ..$ nhs_ha                    : chr "London"
##   ..$ longitude                 : num -0.0909
##   ..$ latitude                  : num 51.5
##   ..$ european_electoral_region : chr "London"
##   ..$ primary_care_trust        : chr "Islington"
##   ..$ region                    : chr "London"
##   ..$ lsoa                      : chr "Islington 023D"
##   ..$ msoa                      : chr "Islington 023"
##   ..$ incode                    : chr "8LX"
##   ..$ outcode                   : chr "EC1Y"
##   ..$ distance                  : int 0
##   ..$ parliamentary_constituency: chr "Islington South and Finsbury"
##   ..$ admin_district            : chr "Islington"
##   ..$ parish                    : chr "Islington, unparished area"
##   ..$ admin_county              : NULL
##   ..$ admin_ward                : chr "Bunhill"
##   ..$ ccg                       : chr "NHS Islington"
##   ..$ nuts                      : chr "Haringey and Islington"
##   ..$ codes                     :List of 7
##   .. ..$ admin_district            : chr "E09000019"
##   .. ..$ admin_county              : chr "E99999999"
##   .. ..$ admin_ward                : chr "E05000367"
##   .. ..$ parish                    : chr "E43000209"
##   .. ..$ parliamentary_constituency: chr "E14000764"
##   .. ..$ ccg                       : chr "E38000088"
##   .. ..$ nuts                      : chr "UKI43"</code></pre>
<p>You can also use outcodes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">near_outcode &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nearest_outcode.html">nearest_outcode</a></span>(<span class="st">"EC1Y"</span>)

<span class="co"># overview</span>
<span class="kw">str</span>(near_outcode[<span class="dv">2</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 11
##   ..$ outcode       : chr "EC2Y"
##   ..$ longitude     : num -0.0938
##   ..$ latitude      : num 51.5
##   ..$ northings     : int 181787
##   ..$ eastings      : int 532350
##   ..$ admin_district:List of 2
##   .. ..$ : chr "Islington"
##   .. ..$ : chr "City of London"
##   ..$ parish        :List of 2
##   .. ..$ : chr "Islington, unparished area"
##   .. ..$ : chr "City of London, unparished area"
##   ..$ admin_county  : list()
##   ..$ admin_ward    :List of 6
##   .. ..$ : chr "Bunhill"
##   .. ..$ : chr "Coleman Street"
##   .. ..$ : chr "Clerkenwell"
##   .. ..$ : chr "Bassishaw"
##   .. ..$ : chr "Cripplegate"
##   .. ..$ : chr "Aldersgate"
##   ..$ country       :List of 1
##   .. ..$ : chr "England"
##   ..$ distance      : num 398</code></pre>
<p>Or longitude and latitude</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">near_ll &lt;-<span class="st"> </span><span class="kw"><a href="../reference/nearest_outcode_lonlat.html">nearest_outcode_lonlat</a></span>(<span class="fl">0.127</span>, <span class="fl">51.507</span>)

<span class="co">#overview</span>
<span class="kw">str</span>(near_ll[<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 11
##   ..$ outcode       : chr "SE28"
##   ..$ longitude     : num 0.105
##   ..$ latitude      : num 51.5
##   ..$ northings     : int 180253
##   ..$ eastings      : int 546166
##   ..$ admin_district:List of 2
##   .. ..$ : chr "Bexley"
##   .. ..$ : chr "Greenwich"
##   ..$ parish        :List of 2
##   .. ..$ : chr "Greenwich, unparished area"
##   .. ..$ : chr "Bexley, unparished area"
##   ..$ admin_county  : list()
##   ..$ admin_ward    :List of 4
##   .. ..$ : chr "Thamesmead Moorings"
##   .. ..$ : chr "Glyndon"
##   .. ..$ : chr "Plumstead"
##   .. ..$ : chr "Thamesmead East"
##   ..$ country       :List of 1
##   .. ..$ : chr "England"
##   ..$ distance      : num 1646</code></pre>
</div>
<div id="find-places" class="section level3">
<h3 class="hasAnchor">
<a href="#find-places" class="anchor"></a>Find places</h3>
<p>Provide a name of a place of interest. You can specify the number of results (default is 10):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">place_query_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/place_query.html">place_query</a></span>(<span class="st">"Hills"</span>, <span class="dt">limit =</span> <span class="dv">11</span>)

<span class="co"># overview</span>
<span class="kw">str</span>(place_query_result[<span class="dv">1</span>])</code></pre></div>
<pre><code>## List of 1
##  $ :List of 21
##   ..$ code                 : chr "osgb4000000074547803"
##   ..$ name_1               : chr "Red Hills"
##   ..$ name_1_lang          : NULL
##   ..$ name_2               : NULL
##   ..$ name_2_lang          : NULL
##   ..$ local_type           : chr "Hamlet"
##   ..$ outcode              : chr "CA11"
##   ..$ county_unitary       : chr "Cumbria"
##   ..$ county_unitary_type  : chr "County"
##   ..$ district_borough     : chr "Eden"
##   ..$ district_borough_type: chr "District"
##   ..$ region               : chr "North West"
##   ..$ country              : chr "England"
##   ..$ longitude            : num -2.77
##   ..$ latitude             : num 54.7
##   ..$ eastings             : int 350463
##   ..$ northings            : int 528604
##   ..$ min_eastings         : int 349915
##   ..$ min_northings        : int 528349
##   ..$ max_eastings         : int 350584
##   ..$ max_northings        : int 528849</code></pre>
<p>You can also find a place using an OSGB code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">place_lookup_result &lt;-<span class="st"> </span><span class="kw"><a href="../reference/place_lookup.html">place_lookup</a></span>(<span class="st">"osgb4000000074544700"</span>)

<span class="co"># overview</span>
<span class="kw">str</span>(place_lookup_result)</code></pre></div>
<pre><code>## List of 21
##  $ code                 : chr "osgb4000000074544700"
##  $ name_1               : chr "Cutler Heights"
##  $ name_1_lang          : NULL
##  $ name_2               : NULL
##  $ name_2_lang          : NULL
##  $ local_type           : chr "Suburban Area"
##  $ outcode              : chr "BD4"
##  $ county_unitary       : NULL
##  $ county_unitary_type  : NULL
##  $ district_borough     : chr "Bradford"
##  $ district_borough_type: chr "MetropolitanDistrict"
##  $ region               : chr "Yorkshire and the Humber"
##  $ country              : chr "England"
##  $ longitude            : num -1.72
##  $ latitude             : num 53.8
##  $ eastings             : int 418830
##  $ northings            : int 431785
##  $ min_eastings         : int 418487
##  $ min_northings        : int 431541
##  $ max_eastings         : int 419039
##  $ max_northings        : int 432041</code></pre>
</div>
<div id="terminated-postcodes" class="section level3">
<h3 class="hasAnchor">
<a href="#terminated-postcodes" class="anchor"></a>Terminated postcodes</h3>
<p>You might end up having terminated postcodes in your data set. These are postcodes that are no longer active. UK postcodes can change so it’s worth checking whether used postcodes are still active. If you need more information about when a particular postcode was terminated use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/terminated_postcode.html">terminated_postcode</a></span>(<span class="st">"E1W 1UU"</span>)</code></pre></div>
<pre><code>##   postcode year_terminated month_terminated   longitude latitude
## 1  E1W 1UU            2015                2 -0.07373227 51.50801</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installation">Installation</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Eryk Walczak.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
